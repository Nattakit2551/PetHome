<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>PetHome - My Favorites</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>

body {
    background: linear-gradient(135deg,#F3E5C7,#E1C699,#CFAE70);
    background-attachment: fixed;
    font-family: 'Kanit', sans-serif;
    margin: 0;
    color: #444;
}

table { margin: auto; }
td { padding: 10px; text-align: center; }

.img-effect {
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    transition: 0.3s;
    cursor: pointer;
}
.img-effect:hover {
    transform: translateY(-5px);
    box-shadow: 0 14px 30px rgba(0,0,0,0.3);
}

.main-wrapper {
    max-width: 1200px;
    margin: 40px auto 80px;
    padding: 0 20px;
}

.section-header {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    padding: 20px 30px;
    border-radius: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

.page-title {
    font-size: 24px;
    font-weight: 600;
    color: #5d4037;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.favorites-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 30px;
}

.product-card {
    background: #fff;
    border-radius: 25px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 15px 35px rgba(0,0,0,0.05);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 4px solid #fff;
}

.product-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 50px rgba(139, 110, 75, 0.25);
}

.card-img-box {
    width: 100%;
    height: 240px;
    overflow: hidden;
    position: relative;
    border-radius: 20px;
    background: #f4f4f4;
}

.card-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s ease;
}

.product-card:hover .card-img { transform: scale(1.1); }

.btn-remove-float {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 35px;
    height: 35px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ff5252;
    cursor: pointer;
    border: none;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: 0.3s;
    z-index: 10;
}
.btn-remove-float:hover {
    background: #ff5252;
    color: #fff;
    transform: rotate(90deg);
}

.badge-fav {
    position: absolute;
    top: 15px;
    left: 15px;
    background: #fff;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    color: #ee4d2d;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 5px;
}

.card-content { padding: 20px; text-align: center; }
.card-title {
    font-size: 18px; font-weight: 600; color: #333; margin-bottom: 8px;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card-price { font-size: 22px; font-weight: bold; color: #ee4d2d; margin-bottom: 20px; }

.btn-cart-action {
    width: 100%; padding: 12px; border: none; border-radius: 15px;
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    color: white; font-size: 16px; font-weight: 500;
    cursor: pointer; transition: 0.3s;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    box-shadow: 0 8px 20px rgba(46, 204, 113, 0.2);
}
.btn-cart-action:hover {
    background: linear-gradient(135deg, #27ae60, #219150);
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(46, 204, 113, 0.35);
}

.empty-state {
    grid-column: 1 / -1; text-align: center; padding: 80px 20px;
    background: rgba(255,255,255,0.9); border-radius: 30px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.05);
}
.empty-icon { font-size: 80px; color: #e0e0e0; margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
.btn-browse {
    display: inline-block; margin-top: 25px; padding: 12px 35px;
    background: #5d4037; color: #fff; border-radius: 30px;
    text-decoration: none; font-weight: bold; transition: 0.3s;
}
.btn-browse:hover { background: #3e2723; transform: translateY(-5px); }

@keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }

.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    display: none; justify-content: center; align-items: center;
    z-index: 9999;
    animation: fadeIn 0.3s;
}

.delete-modal {
    background: #fff;
    width: 90%; max-width: 400px;
    border-radius: 25px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 25px 50px rgba(0,0,0,0.3);
    animation: scaleUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal-icon {
    width: 70px; height: 70px;
    background: #ffebee;
    color: #ff5252;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 30px;
    margin: 0 auto 20px;
}

.modal-title { font-size: 22px; font-weight: bold; color: #333; margin-bottom: 10px; }
.modal-desc { font-size: 16px; color: #777; margin-bottom: 25px; line-height: 1.5; }

.modal-actions { display: flex; gap: 15px; }
.btn-modal {
    flex: 1; padding: 12px; border-radius: 12px;
    font-size: 16px; font-weight: bold; border: none; cursor: pointer; transition: 0.2s;
}
.btn-cancel { background: #f5f5f5; color: #777; }
.btn-cancel:hover { background: #e0e0e0; color: #333; }
.btn-confirm-delete { background: #ff5252; color: #fff; box-shadow: 0 5px 15px rgba(255, 82, 82, 0.3); }
.btn-confirm-delete:hover { background: #d32f2f; transform: translateY(-2px); }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes scaleUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

</style>

<script>
function MM_swapImgRestore() {
  var i,x,a=document.MM_sr;
  for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() {
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_findObj(n, d) {
  var p,i,x; if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
function MM_swapImage() {
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

let itemToDelete = null; 

function displayFavorites(){
    const container = document.getElementById("favorites-grid");
    const countSpan = document.getElementById("fav-count");
    const fav = JSON.parse(localStorage.getItem("petFavorites")) || [];

    if(countSpan) countSpan.innerText = `${fav.length} รายการ`;

    if(fav.length === 0){
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon"><i class="fas fa-heart-broken"></i></div>
                <h2 style="color:#555;">ยังไม่มีรายการโปรด</h2>
                <p style="color:#888;">คุณยังไม่ได้กดถูกใจสินค้าใดๆ เลย</p>
                <a href="Products.html" class="btn-browse">ไปเลือกชมสินค้า</a>
            </div>
        `;
        return;
    }

    container.innerHTML = fav.map(item => `
        <div class="product-card">
            <div class="card-img-box">
                <img src="${item.img}" class="card-img" alt="${item.name}">
                
                <div class="badge-fav">
                    <i class="fas fa-heart"></i> ถูกใจ
                </div>

                <button class="btn-remove-float" onclick="openDeleteModal('${item.id}')" title="ลบออก">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
            
            <div class="card-content">
                <div class="card-title">${item.name}</div>
                <div class="card-price">฿${parseInt(item.price).toLocaleString()}</div>
                
                <button class="btn-cart-action" onclick="moveToCart('${item.id}')">
                    <i class="fas fa-cart-plus"></i> ใส่ตะกร้า
                </button>
            </div>
        </div>
    `).join("");
}

function openDeleteModal(id){
    itemToDelete = id;
    document.getElementById("deleteModal").style.display = "flex";
}

function closeDeleteModal(){
    itemToDelete = null;
    document.getElementById("deleteModal").style.display = "none";
}

function confirmDelete(){
    if(itemToDelete){
        let fav = JSON.parse(localStorage.getItem("petFavorites")) || [];
        fav = fav.filter(p => p.id !== itemToDelete);
        localStorage.setItem("petFavorites", JSON.stringify(fav));
        
        displayFavorites();
        closeDeleteModal();
    }
}

function moveToCart(id){
    let fav = JSON.parse(localStorage.getItem("petFavorites")) || [];
    let cart = JSON.parse(localStorage.getItem("petCart")) || [];
    const product = fav.find(p => p.id === id);

    if(!product) return;

    if(!cart.find(p => p.id === id)){
        cart.push(product);
        localStorage.setItem("petCart", JSON.stringify(cart));
        
        if(confirm("เพิ่มลงตะกร้าเรียบร้อย! ไปที่ตะกร้าสินค้าเลยไหม?")){
            window.location.href = "Shopping Cart.html";
        }
    } else {
        alert("สินค้านี้อยู่ในตะกร้าของคุณแล้ว");
    }
}

document.addEventListener("DOMContentLoaded", displayFavorites);
</script>
</head>

<body onLoad="MM_preloadImages('Home/2.png','Search/2.png','products/2.png','new products/2.png','promotion/2.png','Contact us/2.png','review (1)/2.png','Favorites/2.png','Shopping cart/2.png','PayMent (1)/2.png')">

<table><tr><td><a href="index.html"><img src="Favorites.png" width="1464" height="200" class="img-effect"></a></td></tr></table>

<table>
  <tr>
    <td><a href="index.html" onMouseOver="MM_swapImage('m1','','Home/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="Home/1.png" id="m1" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Search.html" onMouseOver="MM_swapImage('m2','','Search/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="Search/1.png" id="m2" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Products.html" onMouseOver="MM_swapImage('m3','','products/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="products/1.png" id="m3" width="140" height="40" class="img-effect"></a></td>
    <td><a href="New Products.html" onMouseOver="MM_swapImage('m4','','new products/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="new products/1.png" id="m4" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Promotion.html" onMouseOver="MM_swapImage('m5','','promotion/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="promotion/1.png" id="m5" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Contact us.html" onMouseOver="MM_swapImage('m6','','Contact us/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="Contact us/1.png" id="m6" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Review.html" onMouseOver="MM_swapImage('m7','','review (1)/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="review (1)/1.png" id="m7" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Favorites.html" onMouseOver="MM_swapImage('m8','','Favorites/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="Favorites/1.png" id="m8" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Shopping Cart.html" onMouseOver="MM_swapImage('m9','','Shopping cart/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="Shopping cart/1.png" id="m9" width="140" height="40" class="img-effect"></a></td>
    <td><a href="Make payment.html" onMouseOver="MM_swapImage('m10','','PayMent (1)/2.png',1)" onMouseOut="MM_swapImgRestore()"><img src="PayMent (1)/1.png" id="m10" width="140" height="40" class="img-effect"></a></td>
  </tr>
</table>

<div class="main-wrapper">
    <div class="section-header">
        <h2 class="page-title">
            <i class="fas fa-heart" style="color:#ee4d2d;"></i> 
            รายการโปรดของคุณ
        </h2>
        <span id="fav-count" style="font-size:16px; color:#666; font-weight:normal;">0 รายการ</span>
    </div>
    
    <div id="favorites-grid" class="favorites-grid">
        </div>
</div>

<div id="deleteModal" class="modal-overlay">
    <div class="delete-modal">
        <div class="modal-icon">
            <i class="fas fa-trash-alt"></i>
        </div>
        <h3 class="modal-title">ยืนยันการลบ?</h3>
        <p class="modal-desc">คุณแน่ใจหรือไม่ที่จะลบสินค้านี้<br>ออกจากรายการโปรดของคุณ</p>
        <div class="modal-actions">
            <button class="btn-modal btn-cancel" onclick="closeDeleteModal()">ยกเลิก</button>
            <button class="btn-modal btn-confirm-delete" onclick="confirmDelete()">ลบสินค้า</button>
        </div>
    </div>
</div>

</body>
</html>